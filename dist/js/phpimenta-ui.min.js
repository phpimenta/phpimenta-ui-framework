"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var modals=document.querySelectorAll(".phpimenta-ui-modal");modals.forEach(function(e,t){for(var n=e.children[0].children[0].children,r=n.length,a=0;a<r;a++){var i=n[a];"btn-close"==i.classList.value&&i.addEventListener("click",function(){window.modal("#"+e.id,"hide")})}});var dropdownTriggers=document.querySelectorAll(".phpimenta-dropdown-trigger");dropdownTriggers.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById(this.dataset.toggle),n=window.getComputedStyle(t).getPropertyValue("display");t.style.display="none"==n?"block":"none"})}),window.addEventListener("click",function(r){"phpimenta-ui-modal"==r.target.classList.value&&(r.target.style.display="none"),dropdownTriggers.forEach(function(e){var t=document.getElementById(e.dataset.toggle),n=window.getComputedStyle(t).getPropertyValue("display");e.dataset.toggle!==r.target.dataset.toggle&&"block"==n&&(t.style.display="none")})});var toggles=document.querySelectorAll("button[data-toggle=modal]");toggles.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target;modal(e,"show")})}),window.modal=function(e,t){var n=document.querySelector(e);null!=n&&"show"==t?n.style.display="block":null!=n&&"hide"==t&&(n.style.display="none")};var Datepicker=function(){function e(){_classCallCheck(this,e),this.months=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],this.weekdays=["dom","seg","ter","qua","qui","sex","sáb"],this.date=new Date,this.currentDay=this.date.getDate(),this.currentYear=this.date.getFullYear(),this.currentMonth=this.date.getMonth(),this.dateFormat="dd-mm-yyyy",this._currentInput}return _createClass(e,[{key:"enable",value:function(){this.listener()}},{key:"listener",value:function(){var i=this;function e(e){e.stopImmediatePropagation();var t=e.target.classList;if(t.toString().match(/phpimenta-ui-datepicker-modal/i))i.close();else if(t.toString().match(/phpimenta-ui-datepicker-link/i)){var n=e.target.innerHTML,r=i.convertDate(i.currentYear,i.currentMonth+1,n),a=document.querySelector(i._currentInput);null!=a.value?a.value=r:null!=a.innerHTML&&(a.innerHTML=r),i.close()}else t.toString().match(/phpimenta-ui-datepicker-year-increase-button/i)?(i.currentYear=i.currentYear+1,i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-year-decrease-button/i)?(i.currentYear=i.currentYear-1,i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-month-decrease-button/i)?(i.currentMonth=i.currentMonth-1,-1==i.currentMonth&&(i.currentMonth=11,i.currentYear=i.currentYear-1),i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-month-increase-button/i)&&(i.currentMonth=i.currentMonth+1,12==i.currentMonth&&(i.currentMonth=0,i.currentYear=i.currentYear+1),i.create(i._currentInput))}window.removeEventListener("click",e),window.addEventListener("click",e)}},{key:"convertDate",value:function(e,t,n){return t=t.toString().padStart(2,"0"),n=n.toString().padStart(2,"0"),"dd-mm-yyyy"==this.dateFormat?n+"/"+t+"/"+e:"yyyy-mm-dd"==this.dateFormat?e+"/"+t+"/"+n:void 0}},{key:"create",value:function(e){this._currentInput=e,this.close(),this.createGUI()}},{key:"close",value:function(){document.querySelectorAll(".phpimenta-ui-datepicker-modal").forEach(function(e){e.remove()})}},{key:"daysInMonth",value:function(e,t){return t+=1,new Date(e,t,0).getDate()}},{key:"weekday",value:function(e,t,n){return new Date(e,t,n).getDay()}},{key:"createGUI",value:function(){var e=document.createElement("div");e.className="phpimenta-ui-datepicker-modal-content";var t=document.createElement("table");t.classList="phpimenta-ui-table";var n=document.createElement("caption"),r=document.createElement("div");r.classList="header-month";var a=document.createElement("button");a.innerHTML="&lsaquo;",a.classList="phpimenta-ui-datepicker-month-decrease-button",r.appendChild(a);var i=document.createElement("span");i.innerHTML=this.months[this.currentMonth],r.appendChild(i);var c=document.createElement("button");c.innerHTML="&rsaquo;",c.classList="phpimenta-ui-datepicker-month-increase-button",r.appendChild(c),n.appendChild(r);var o=document.createElement("div"),d=document.createElement("button");d.innerHTML="&lsaquo;",d.classList="phpimenta-ui-datepicker-year-decrease-button",o.appendChild(d);var l=document.createElement("span");l.innerHTML=this.currentYear,o.appendChild(l);var u=document.createElement("button");u.classList="phpimenta-ui-datepicker-year-increase-button",u.innerHTML="&rsaquo;",o.appendChild(u),o.classList="header-year",n.appendChild(o),t.appendChild(n);for(var s=document.createElement("thead"),p=document.createElement("tr"),h=0;h<=6;h++){var m=document.createElement("th");m.innerHTML=this.weekdays[h],p.appendChild(m)}s.appendChild(p),t.appendChild(s);for(var y,v=document.createElement("tbody"),g=0,k=!1,f=this.daysInMonth(this.currentYear,this.currentMonth),b=1;b<=f;b++){if(0==g&&(y=document.createElement("tr")),0==k)if(this.weekday(this.currentYear,this.currentMonth,1)==g){k=!0,b=1;var E=document.createElement("td");E.classList="phpimenta-ui-datepicker-link",1==this.currentDay&&(E.classList="current-date phpimenta-ui-datepicker-link"),E.innerHTML="01",y.appendChild(E),v.appendChild(y)}else{var w=document.createElement("td");y.appendChild(w),v.appendChild(y)}else{var L=document.createElement("td");L.classList="phpimenta-ui-datepicker-link",this.currentDay==b&&(L.classList="current-date phpimenta-ui-datepicker-link"),L.innerHTML=b.toString().padStart(2,"0"),y.appendChild(L),v.appendChild(y)}6==g?g=0:g++}t.appendChild(v),e.appendChild(t);var C=document.createElement("div");C.classList="phpimenta-ui-datepicker-modal",C.appendChild(e),document.querySelector("body").appendChild(C)}}]),e}(),datepicker=new Datepicker;datepicker.enable(),window.phpimenta_datepicker=function(e){datepicker.create(e)};