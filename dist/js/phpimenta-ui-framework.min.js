"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Tab=function(){function t(){_classCallCheck(this,t),this.hideTabContent();var e=document.querySelectorAll(".phpimenta-ui-tabs"),i=this;e.forEach(function(e){var a=Array.from(e.children);a.forEach(function(t){var e=t.children[0],n=e.getAttribute("href"),r=document.querySelector(n);e.addEventListener("click",function(e){e.preventDefault(),i.removeActiveClassFromItems(a),i.hideTabContent(a),t.classList.add("active"),r.style.display="block"}),t.classList.toString().match(/active/i)&&(r.style.display="block")})})}return _createClass(t,[{key:"removeActiveClassFromItems",value:function(e){e.forEach(function(e){e.classList.remove("active")})}},{key:"hideTabContent",value:function(e){e?e.forEach(function(e){var t=e.children[0].getAttribute("href");document.querySelector(t).style.display="none"}):document.querySelectorAll(".phpimenta-ui-tab-content").forEach(function(e){Array.from(e.children).forEach(function(e){document.getElementById(e.id).style.display="none"})})}}]),t}();new Tab;var files=document.querySelectorAll(".phpimenta-ui-upload input[type=file]");files.forEach(function(e){e.addEventListener("change",function(e){var t,n=[];Array.from(this.files).forEach(function(e){n.push(" "+e.name)}),Array.from(this.parentElement.children).forEach(function(e){"LABEL"==e.nodeName&&(t=e)}),t.innerHTML=n.toString()})});var modals=document.querySelectorAll(".phpimenta-ui-modal");modals.forEach(function(e,t){for(var n=e.children[0].children[0].children,r=n.length,a=0;a<r;a++){var i=n[a];"btn-close"==i.classList.value&&i.addEventListener("click",function(){window.modal("#"+e.id,"hide")})}});var toggles=document.querySelectorAll("button[data-toggle=modal]");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}toggles.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target;modal(e,"show")})}),window.addEventListener("click",function(e){"phpimenta-ui-modal"==e.target.classList.value&&(e.target.style.display="none")}),window.modal=function(e,t){var n=document.querySelector(e);null!=n&&"show"==t?n.style.display="block":null!=n&&"hide"==t&&(n.style.display="none")};var Datepicker=function(){function e(){_classCallCheck(this,e),this.months=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],this.weekdays=["dom","seg","ter","qua","qui","sex","sáb"],this.date=new Date,this.currentDay=this.date.getDate(),this.currentYear=this.date.getFullYear(),this.currentMonth=this.date.getMonth(),this.dateFormat="dd-mm-yyyy",this._currentInput}return _createClass(e,[{key:"enable",value:function(){this.listener()}},{key:"listener",value:function(){var i=this;function e(e){e.stopImmediatePropagation();var t=e.target.classList;if(t.toString().match(/phpimenta-ui-datepicker-modal/i))i.close();else if(t.toString().match(/phpimenta-ui-datepicker-link/i)){var n=e.target.innerHTML,r=i.convertDate(i.currentYear,i.currentMonth+1,n),a=document.querySelector(i._currentInput);null!=a.value?a.value=r:null!=a.innerHTML&&(a.innerHTML=r),i.close()}else t.toString().match(/phpimenta-ui-datepicker-year-increase-button/i)?(i.currentYear=i.currentYear+1,i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-year-decrease-button/i)?(i.currentYear=i.currentYear-1,i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-month-decrease-button/i)?(i.currentMonth=i.currentMonth-1,-1==i.currentMonth&&(i.currentMonth=11,i.currentYear=i.currentYear-1),i.create(i._currentInput)):t.toString().match(/phpimenta-ui-datepicker-month-increase-button/i)&&(i.currentMonth=i.currentMonth+1,12==i.currentMonth&&(i.currentMonth=0,i.currentYear=i.currentYear+1),i.create(i._currentInput))}window.removeEventListener("click",e),window.addEventListener("click",e)}},{key:"convertDate",value:function(e,t,n){return t=t.toString().padStart(2,"0"),n=n.toString().padStart(2,"0"),"dd-mm-yyyy"==this.dateFormat?n+"/"+t+"/"+e:"yyyy-mm-dd"==this.dateFormat?e+"/"+t+"/"+n:void 0}},{key:"create",value:function(e){this._currentInput=e,this.close(),this.createGUI()}},{key:"close",value:function(){document.querySelectorAll(".phpimenta-ui-datepicker-modal").forEach(function(e){e.remove()})}},{key:"daysInMonth",value:function(e,t){return t+=1,new Date(e,t,0).getDate()}},{key:"weekday",value:function(e,t,n){return new Date(e,t,n).getDay()}},{key:"createGUI",value:function(){var e=document.createElement("div");e.className="phpimenta-ui-datepicker-modal-content";var t=document.createElement("table");t.classList="phpimenta-ui-table";var n=document.createElement("caption"),r=document.createElement("div");r.classList="header-month";var a=document.createElement("button");a.innerHTML="&lsaquo;",a.classList="phpimenta-ui-datepicker-month-decrease-button",r.appendChild(a);var i=document.createElement("span");i.innerHTML=this.months[this.currentMonth],r.appendChild(i);var c=document.createElement("button");c.innerHTML="&rsaquo;",c.classList="phpimenta-ui-datepicker-month-increase-button",r.appendChild(c),n.appendChild(r);var o=document.createElement("div"),l=document.createElement("button");l.innerHTML="&lsaquo;",l.classList="phpimenta-ui-datepicker-year-decrease-button",o.appendChild(l);var u=document.createElement("span");u.innerHTML=this.currentYear,o.appendChild(u);var d=document.createElement("button");d.classList="phpimenta-ui-datepicker-year-increase-button",d.innerHTML="&rsaquo;",o.appendChild(d),o.classList="header-year",n.appendChild(o),t.appendChild(n);for(var s=document.createElement("thead"),h=document.createElement("tr"),p=0;p<=6;p++){var m=document.createElement("th");m.innerHTML=this.weekdays[p],h.appendChild(m)}s.appendChild(h),t.appendChild(s);for(var f,v=document.createElement("tbody"),y=0,k=!1,b=this.daysInMonth(this.currentYear,this.currentMonth),E=1;E<=b;E++){if(0==y&&(f=document.createElement("tr")),0==k)if(this.weekday(this.currentYear,this.currentMonth,1)==y){k=!0,E=1;var C=document.createElement("td");C.classList="phpimenta-ui-datepicker-link",1==this.currentDay&&(C.classList="current-date phpimenta-ui-datepicker-link"),C.innerHTML="01",f.appendChild(C),v.appendChild(f)}else{var L=document.createElement("td");f.appendChild(L),v.appendChild(f)}else{var g=document.createElement("td");g.classList="phpimenta-ui-datepicker-link",this.currentDay==E&&(g.classList="current-date phpimenta-ui-datepicker-link"),g.innerHTML=E.toString().padStart(2,"0"),f.appendChild(g),v.appendChild(f)}6==y?y=0:y++}t.appendChild(v),e.appendChild(t);var M=document.createElement("div");M.classList="phpimenta-ui-datepicker-modal",M.appendChild(e),document.querySelector("body").appendChild(M)}}]),e}(),datepicker=new Datepicker;datepicker.enable(),window.phpimenta_datepicker=function(e){datepicker.create(e)};